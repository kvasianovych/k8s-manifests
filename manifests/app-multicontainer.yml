apiVersion: v1
kind: Pod
metadata:
  name: multi-container-pod
spec:
  # Define the shared volume that both containers will use.
  # An emptyDir volume is created when the pod is assigned to a node
  # and exists as long as that pod is running on that node.
  volumes:
  - name: shared-html
    emptyDir: {}

  containers:
    # First container: The web server
  - name: nginx-container
    image: nginx:latest
    ports:
    - containerPort: 80
    # Mount the shared volume to Nginx's web root directory
    volumeMounts:
    - name: shared-html
      mountPath: /usr/share/nginx/html

    # Second container: The content generator (sidecar)
  - name: busybox-container
    image: busybox:1.35
    command: ["/bin/sh", "-c"]
    args:
    - while true; do echo "<html><head><title>Multi-container Pod</title></head><body><h1>Hello from the sidecar!</h1><p>The current time is $(date).</p></body></html>" > /var/log/index.html; sleep 5; done
    volumeMounts:
    - name: shared-html
      mountPath: /var/log
